/* slider_tailwind.fixed.scss
   NOTE:
   - No `@use "tailwindcss"` here (keep Tailwind directives in your global CSS).
   - Non-standard utilities replaced with plain CSS.
*/

@use "./utilities.scss";

/* ===== Core target ===== */
.slider-target {
  position: relative;            /* @apply relative */
  box-sizing: border-box;        /* @apply box-border */
  user-select: none;             /* @apply select-none */
  -webkit-tap-highlight-color: transparent; /* replaces `tap-highlight-transparent` */
  -webkit-touch-callout: none;   /* replaces `touch-callout-none` */
  touch-action: none;            /* replaces `touch-none` */
  /* disabled state */
  &.is-disabled { cursor: not-allowed; }
}

/* Focus states (left as hooks if you need them) */
.slider-focused {}
.slider-tooltip-focus {}
.slider-tooltip-drag {}

/* LTR / RTL hooks */
.slider-ltr {}
.slider-rtl {}

/* Orientation */
.slider-horizontal { height: 0.375rem; /* @apply h-1.5 */ }
.slider-vertical   { width: 0.375rem; height: 20rem; /* @apply w-1.5 h-80 */ }

/* Base rails */
.slider-base {
  width: 100%; height: 100%;    /* @apply w-full h-full */
  position: relative;           /* @apply relative */
  z-index: 1;                   /* replaces non-standard z-1 */
  border-radius: 0.25rem;       /* @apply rounded */
}

.slider-connects {
  width: 100%; height: 100%;
  position: relative;
  overflow: hidden;
  z-index: 0;                   /* replaces z-0 */
  border-radius: 0.25rem;
}

/* Filled track segment */
.slider-connect {
  position: absolute;
  z-index: 1;
  top: 0; right: 0;
  transform-origin: 0 0;
  height: 100%; width: 100%;
  background-color: oklch(53% 0.06 252); /* fallback for neutral; or use your theme var */
  cursor: pointer;
  transition: transform 0.3s;   /* replaces tap:transition */
}

/* Origins (handles’ parents) */
.slider-origin {
  position: absolute;
  z-index: 1;
  top: 0; right: 0;
  transform-origin: 0 0;
  height: 100%; width: 100%;
  transition: transform 0.3s;
  /* Horizontal-specific adjustments */
  &.is-horizontal {
    height: 0; /* acts as transform container */
  }
  /* Vertical-specific adjustments */
  &.is-vertical {
    top: -100%;
    width: 0;
  }
}

/* Handle */
.slider-handle {
  position: absolute;
  border-radius: 9999px;        /* @apply rounded-full */
  background-color: #fff;       /* @apply bg-white */
  border: 1px solid oklch(92% 0 0); /* @apply border-base-300 */
  box-shadow: 0 1px 2px rgba(0,0,0,.12), 0 1px 1px rgba(0,0,0,.06); /* shadow-slider */
  cursor: grab;                 /* @apply cursor-grab */
  outline: none;                /* focus:outline-none */

  /* Horizontal sizing/position */
  width: 1.5rem;   /* 24px */
  height: 1.5rem;  /* 24px */
  top: -0.6rem;  /* center handle for larger size */
  right: -0.875rem;

  /* RTL variant – if needed, toggle this class in JS instead of custom `txt-rtl-h:` */
  &.is-rtl {
    right: auto;
    left: -0.875rem;
  }

  /* Vertical variant sizing */
  &.is-vertical {
    width: 2.75rem;
    height: 2.75rem;
    top: -0.875rem;
    right: -0.875rem;
  }

  /* Disabled */
  &.is-disabled { cursor: not-allowed; }

  /* Focus ring */
  &:focus {
    box-shadow:
      0 0 0 3px color-mix(in oklch, var(--fallback-p, #4d768d) 30%, white),
      0 1px 2px rgba(0,0,0,.12), 0 1px 1px rgba(0,0,0,.06);
  }
}

@media (prefers-reduced-motion: reduce) {
  .slider-handle,
  .slider-base,
  .slider-connect,
  .slider-origin {
    transition: none !important;
  }
}

/* Larger touch target area (if you wrap the handle) */
.slider-touch-area { width: 24px; height: 24px; }

/* Tooltip */
.slider-tooltip {
  position: absolute;
  display: block;
  font-size: 0.875rem;          /* @apply text-sm */
  font-weight: 600;             /* @apply font-semibold */
  white-space: nowrap;
  padding: 0.25rem 0.375rem;    /* @apply py-1 px-1.5 */
  min-width: 1.25rem;           /* @apply min-w-5 */
  text-align: center;
  color: #fff;                  /* @apply text-white */
  border-radius: 0.25rem;       /* @apply rounded */
  border: 1px solid oklch(92% 0 0); /* @apply border-base-300 */
  background-color: oklch(53% 0.06 252); /* @apply bg-neutral */
  transform: translateX(-50%);  /* horizontal default */
  left: 50%;
}

/* Tooltip positions */
.slider-tooltip-top    { bottom: 1.5rem; } /* ~ bottom-6 */
.slider-tooltip-bottom {
  top: 1.5rem;
  transform: translateX(-50%);
}
.slider-tooltip-left  {
  right: 1.5rem;
  transform: translateY(-50%);
  top: 50%;
}
.slider-tooltip-right {
  left: 1.5rem;
  transform: translateY(-50%);
  top: 50%;
}
.slider-tooltip-hidden { display: none; }

/* Active / dragging */
.slider-active {
  box-shadow: 0 0 0 4px rgba(0,0,0,.06); /* shadow-slider-active */
  cursor: grabbing;
}

/* Draggable cursors */
.slider-draggable {
  cursor: ew-resize;
}
.slider-draggable.is-vertical {
  cursor: ns-resize;
}

/* Optional state hooks */
.slider-state-tap {}
.slider-state-drag {}

/* ===== Optional: add these utility classes globally if you still want to `@apply` them elsewhere =====
@layer utilities {
  .tap-highlight-transparent { -webkit-tap-highlight-color: transparent; }
  .touch-callout-none { -webkit-touch-callout: none; }
}
*/
